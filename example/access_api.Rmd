---
title: "Access API"
author: "Jakob Richter"
date: "January 26, 2018"
output: html_document
---

## Build and start the container
```{r, engine='sh', eval = FALSE}
bash ../docker/rebuild-omlbotlookup.sh
bash ../docker/run-omlbotlookup.sh
```

## Accessing the API

### Lookup performance data for `algo` on `task` with some given paramters
```{r access}
library(jsonlite)
server.url = "http://localhost:8746"
param = list(algo = 5965, task = 3, num.trees = 100)
httr.res = httr::GET(server.url, query = param, httr::accept_json())
res = httr::content(httr.res)
res

# We return the performance estimate for your setup.
performance = res$performance

# We also return the euclidean distance to the nearest point in the database, so you know how certain we are.
distance = res$distance

# If you want to examine the actual point yourself, we return the setup id and parameter values of the actual run as well.
nearest_setup = res$nearest_setup
```

### Request possible tasks

# We return a list of the availiable task ids.
```{r tasks}
server.url = "http://localhost:8746/tasks"
httr.res = httr::GET(server.url, httr::accept_json())
res = httr::content(httr.res)
res
```

### Request possible algos on specific task
```{r algos}
server.url = "http://localhost:8746/algos"
param = list(task = 3)
httr.res = httr::GET(server.url, query = param, httr::accept_json())
res = httr::content(httr.res)
# We return a list of every possible algorithm id for your given task.
# We also return the algorithm names for these ids.
res$possible_algo_ids
res$algorithm_names
```

### Request possible parameters
```{r parameters}
server.url = "http://localhost:8746/parameters"
param = list(algo = 5859)
httr.res = httr::GET(server.url, query = param, httr::accept_json())
res = httr::content(httr.res)
res
```

